---
weight: 40
sourceSHA: 3791763f33cb5f3cfc9e51ab2f3ed719dff99a490669808b7c9ff0c351047a55
---

# Monitoring System

## Architecture Overview

The PostgreSQL Operator Monitoring System includes the following components:

1. **Prometheus**: Metrics collection and storage
2. **Grafana**: Data visualization
3. **Alertmanager**: Alert management
4. **Postgres Exporter**: Collects PostgreSQL metrics

## Key Metrics

| Metric                   | Description       |
| ------------------------ | ----------------- |
| pg\_stat\_activity       | Current active connections |
| pg\_stat\_database       | Database statistics |
| pg\_stat\_user\_tables   | User table statistics |
| pg\_stat\_bgwriter       | Background writer statistics |
| pg\_stat\_replication     | Replication status |

## Alert Rules

1. **High Number of Connections**: active\_connections > max\_connections \* 0.8
2. **Replication Lag**: replication\_lag > 1048576 bytes
3. **Low Cache Hit Ratio**: cache\_hit\_ratio < 0.95
4. **Insufficient Disk Space**: disk\_usage > 80%

## Best Practices

1. Configure reasonable alert thresholds
2. Regularly review monitoring metrics
3. Optimize slow queries
4. Monitor resource usage
