---
weight: 25
---

# 日志查询

从容器层面了解 PostgreSQL 实例运行过程中的日志，例如 PostgreSQL 错误日志、慢查询日志等。妥善使用日志能帮助您快速定位问题，处理故障和异常。

**注意**： 为节省磁盘空间，平台默认保留 7 天（最多 30 天）的日志记录。实际保留时长可在运维中心的 **日志** > **策略管理** 中设置。如需长久保存，请及时导出日志。

## 前提条件

如果界面提示无数据，请部署 **日志采集组件** 且组件运行正常。

## 操作步骤

<Tabs>

<Tab label="命令行">

### 查看 PostgreSQL 日志
```bash
# 示例：查看主节点日志
kubectl -n my-namespace logs my-pg-instance-0 -c postgres

# 示例：查看副本节点日志
kubectl -n my-namespace logs my-pg-instance-1 -c postgres
```

### 导出日志到文件
```bash
# 示例：导出日志到文件
kubectl -n my-namespace logs my-pg-instance-0 -c postgres > postgres.log
```

</Tab>

<Tab label="Web 控制台">

1. 在左侧导航栏中，单击 **PostgreSQL**
2. 单击 ***命名空间的名称***
3. 单击 ***实例名称***
4. 在 **日志** 页签中，设置查找条件：
    * 查找特定容器组即 PostgreSQL 副本的日志：在 **容器组** 处，选择一个容器组，并单击 **搜索**
    * 查找特定时间段内的日志：在 **时间范围** 处，选择一个时段
5. 稍等片刻，并查看结果
6. （可选）单击 <span style={{display: 'inline-block'}}>![](../assets/44buttonexport.png)</span>，导出日志

</Tab>
</Tabs>

## 日志类型说明

| 日志类型 | 说明 |
|----------|------|
| PostgreSQL 日志 | 包含数据库运行时的错误、警告等信息 |

## 注意事项
1. 日志文件默认存储在容器内的 /var/log/postgresql 目录
2. 日志轮转策略可在 PostgreSQL 配置中调整：
   - log_rotation_age: 单个日志文件的最大生命周期
   - log_rotation_size: 单个日志文件的最大大小
3. 日志级别可通过 log_min_messages 参数配置：
   - DEBUG5 到 DEBUG1: 详细的调试信息
   - INFO: 信息性消息
   - NOTICE: 重要但非错误条件
   - WARNING: 警告
   - ERROR: 错误
4. 确保为日志存储分配足够的磁盘空间
