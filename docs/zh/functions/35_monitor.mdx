---
weight: 35
---
# 监控

## 功能简介
内嵌面板中的监控数据可用于从资源、性能及容量等方面进行 PostgreSQL 监控与告警，且支持配置通知策略。

直观呈现的监控数据可用于为运维巡检或性能调优提供决策支持。

## 监控指标

平台默认收集 PostgreSQL 的资源、性能及容量相关常用监控指标。在实例的 **监控** 页签中，可查看指标的实时监控数据。

| 指标 | 说明 |
|------|------|
| CPU 使用率 | PostgreSQL 进程的 CPU 使用时间百分比 |
| 内存使用 | PostgreSQL 进程的常驻内存和虚拟内存使用量 |
| 文件描述符 | PostgreSQL 打开的文件描述符数量 |
| 连接数 | 当前活跃连接数和最大连接数限制 |
| 事务统计 | 各数据库的提交和回滚事务数量 |
| 查询统计 | SELECT、INSERT、UPDATE、DELETE 操作的数量 |
| 缓存命中率 | 各数据库的缓存命中率百分比 |
| 锁统计 | 表级锁的数量和等待时间 |
| 临时文件 | 各数据库创建的临时文件大小 |
| 检查点 | 检查点发生的频率和写入数据量 |
| 冲突/死锁 | 各数据库发生的冲突和死锁数量 |
| 后台写入 | 后台写入器的缓冲区统计 |

## 主要监控项说明

### 资源使用
- **CPU 使用率**：反映 PostgreSQL 进程的 CPU 负载情况
- **内存使用**：包括常驻内存和虚拟内存，监控内存泄漏和过度使用
- **文件描述符**：确保不会达到系统限制

### 性能指标  
- **事务统计**：跟踪各数据库的提交/回滚率，评估事务成功率
- **查询统计**：分析各类型查询的比例，识别性能瓶颈
- **缓存命中率**：评估共享缓冲区的效率，命中率应保持在 95% 以上
- **锁统计**：检测表级锁争用情况

### 容量规划
- **连接数**：监控连接池使用情况，及时调整 max_connections
- **临时文件**：识别需要优化的大查询
- **检查点**：评估检查点频率对性能的影响

## 注意事项
1. 监控数据默认保留 7 天
2. 部分指标需要启用统计收集器
3. 建议为关键指标设置告警阈值
