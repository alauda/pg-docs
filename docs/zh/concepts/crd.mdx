---
weight: 10
---

# 自定义资源定义 (CRD)

## 什么是 CRD

CRD（Custom Resource Definition）是 Kubernetes 的一种扩展机制，允许用户定义自己的资源类型。PostgreSQL Operator 通过 CRD 来管理 PostgreSQL 集群的生命周期。

## CRD 结构

PostgreSQL CRD 主要包含以下字段：

```yaml
apiVersion: acid.zalan.do/v1
kind: postgresql
metadata:
  name: pg-cluster
spec:
  teamId: my-team
  postgresql:
    version: "14"
  numberOfInstances: 3
  resources:
    requests:
      cpu: "1"
      memory: 2Gi
  volume:
    size: 50Gi
    storageClass: standard
```

| 字段 | 说明 |
|------|------|
| teamId | 团队标识符 |
| postgresql.version | PostgreSQL 版本 |
| numberOfInstances | 集群节点数量 |
| resources | 资源请求和限制 |
| volume | 存储配置 |

## 使用场景

- 创建新的 PostgreSQL 集群
- 修改集群配置
- 扩缩容集群
- 管理集群生命周期

## 注意事项
1. CRD 创建后不可修改部分字段
2. 确保 spec 字段配置正确
3. 合理设置资源限制
